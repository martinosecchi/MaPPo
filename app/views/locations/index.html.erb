<% provide(:title, 'Listing locations') %>
<h1>Listing locations</h1>

<div class="hero-unit">
  <div id="map_canvas" align=center>
  <%= gmaps4rails(@json) %>
  </div>
  <br />
<table class="table ">
  <tr>
    <th>Name</th>
    <th>State</th>
    <th>Projects</th>
    <th></th>
    <th></th>
  </tr>

<% @locations.each do |location| %>
  <tr>
    <td><%= link_to location.name, location %></td>
    <td><%= location.state %></td>
    <td><%= location.projects.length%></td>
    <% if user_signed_in? %>
    <td><%= link_to 'Edit', edit_location_path(location) %></td>
    <td><%= link_to 'Delete', location, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    <% end %>
  </tr>
<% end %>
</table>
<% if user_signed_in? %>
<%= link_to '+ New Location', new_location_path %>
<% end %>
</div>

<br />
<%= link_to "Back", :back %>
